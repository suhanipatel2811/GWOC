<!DOCTYPE html>
<html class="light" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>MindSettler - User Profile</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class", 
            theme: {
                extend: {
                    colors: {
                        primary: "#3F2965", // Deep Purple
                        "primary-dark": "#2a1b46",
                        "vibrant-pink": "#DD1764", // Vibrant Pink
                        "pale-lavender": "#EBE7F2", // Soft Pale Lavender
                        "soft-pink": "#FADDE6", // Soft Pink
                        "background-light": "#FFFFFF", // White as requested
                        "background-dark": "#18151d", 
                        "surface-light": "#ffffff", 
                        "surface-dark": "#1a2c26", 
                        "text-main": "#111815", 
                        "text-muted": "#63887c"
                    }, 
                    fontFamily: {
                        display: "Lexend"
                    }, 
                    borderRadius: {
                        DEFAULT: "0.5rem", 
                        lg: "1rem", 
                        xl: "1.5rem", 
                        full: "9999px"
                    }
                }
            }
        };
    </script>
<style>::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #dce5e2;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #63887c;
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .material-symbols-outlined.filled {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-main dark:text-white transition-colors duration-200">
<div class="flex h-screen overflow-hidden">
<aside class="hidden md:flex w-72 flex-col bg-surface-light dark:bg-surface-dark border-r border-[#f0f4f3] dark:border-[#2a3c36] h-full transition-colors duration-200">
<div class="p-6">
<div class="flex items-center gap-3 text-text-main dark:text-white mb-8">
<div class="size-8 text-primary">
<svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z" fill="currentColor"></path>
</svg>
</div>
<h2 class="text-lg font-bold tracking-tight text-primary">MindSettler</h2>
</div>
<div class="flex gap-4 items-center mb-8 p-3 rounded-xl bg-gray-50 dark:bg-[#11211c]">
{% if user.profile.avatar_type == 'masculine' %}
<div class="bg-center bg-no-repeat bg-cover rounded-full size-12" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBhHHgZ9dtY04LKWmnaFO_zuWr-nvhOMkikf7glv9jjhjW34soAWJtg1Ezfji2QW-FTm4AssdDfallCJypnVz8bXPQIH9OFspTYa8RwFk-uGjam30zoXpuISf6C0KlB7LwxXk9a_OkxXxfltEsPcdaLg1jMsrDIYr2-9i-_nKlH02uemfvbI_hxSiPoYs5GAJE2QTrVjYIidr0ivD9W7CizNyKkDVaIIkPdxJOUWNojrTdoHji4oDks3b_F0DR4_zQc3fARGU6WoI_A");'></div>
{% elif user.profile.avatar_type == 'feminine' %}
<div class="bg-center bg-no-repeat bg-cover rounded-full size-12" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCo-_6pH73xFibPz6-R56q1Q-EzEJJDyvWY_rOrv9edZUdoDgTa3ClGay7MOFTlc0N2l4fONWmrWVmUQ-SWItxN8_lFhjEhcsdTQ1uJIT29UxvB2-qlE2BI_YtqQCa5AlTqb5AP7M5ffRcVhqw83BfEnNBLJz2qW21Bne4M59WV-YuaGfbBE1qYr7KoVunP8CcZkd3WI0WelY-QEFIIqFHzyAnGtZOOOXDFOXW_5Xd--64iSMuT1XvFEIHjzXM0fL3m6jp41AFVpE_a");'></div>
{% elif user.profile.avatar_type == 'neutral' %}
<div class="bg-center bg-no-repeat bg-cover rounded-full size-12" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAixXpUehE17jx6XSugCs3bmjgPik7TWVeiLEp-KyVO1LX3bqhp-fYxSlCZoFXtueeg9YTe7aMybEAF8UDg-rs9nQotScmHo0wod4CQljl1V-rvR8a8sjk2DnDLy0oMqpaOdgMd9mDdeLYBPKTY6921mP8OCv7W5Djbq_31PstKhrUOf5GK0Edy8uzWPfzMoTFdHg8wsU5U7YiGE0rKL-kaydxWWJY-1Tn0wIyBL4r0-t2r2HRR9YJeJsMFN-jjF7wFjThqFmSF8vlt");'></div>
{% else %}
<div class="bg-soft-pink rounded-full size-12 flex items-center justify-center">
<span class="text-xl font-bold text-primary">{{ user.first_name.0|default:user.username.0|upper }}</span>
</div>
{% endif %}
<div class="flex flex-col min-w-0">
<h3 class="text-sm font-bold truncate text-text-main dark:text-white">{{ user.get_full_name|default:user.username }}</h3>
<p class="text-xs text-text-muted dark:text-gray-400 truncate">Member since {{ user.date_joined.year }}</p>
</div>
</div>
<nav class="flex flex-col gap-2">
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-text-main dark:text-white hover:bg-gray-50 dark:hover:bg-[#2a3c36] transition-colors" href="{% url 'users:overview' %}">
<span class="material-symbols-outlined text-text-muted dark:text-gray-400">dashboard</span>
<span class="font-medium text-sm">Overview</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl bg-pale-lavender dark:bg-primary/20 text-primary dark:text-primary transition-colors" href="{% url 'users:profile' %}">
<span class="material-symbols-outlined filled">person</span>
<span class="font-medium text-sm">Personal Info</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-text-main dark:text-white hover:bg-gray-50 dark:hover:bg-[#2a3c36] transition-colors" href="{% url 'users:sessionhistory' %}">
<span class="material-symbols-outlined text-text-muted dark:text-gray-400">history</span>
<span class="font-medium text-sm">Session History</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-text-main dark:text-white hover:bg-gray-50 dark:hover:bg-[#2a3c36] transition-colors" href="{% url 'users:myprogress' %}">
<span class="material-symbols-outlined text-text-muted dark:text-gray-400">bar_chart</span>
<span class="font-medium text-sm">My Progress</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-xl text-text-main dark:text-white hover:bg-gray-50 dark:hover:bg-[#2a3c36] transition-colors" href="{% url 'users:settings' %}">
<span class="material-symbols-outlined text-text-muted dark:text-gray-400">settings</span>
<span class="font-medium text-sm">Settings</span>
</a>
</nav>
</div>
<div class="mt-auto p-6 border-t border-[#f0f4f3] dark:border-[#2a3c36]">
<a class="flex items-center gap-3 px-4 py-2 rounded-xl text-text-muted dark:text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors" href="{% url 'users:logout' %}">
<span class="material-symbols-outlined">logout</span>
<span class="font-medium text-sm">Log Out</span>
</a>
</div>
</aside>
<main class="flex-1 flex flex-col h-full overflow-y-auto relative bg-background-light dark:bg-background-dark">
<header class="md:hidden flex items-center justify-between px-4 py-3 bg-surface-light dark:bg-surface-dark border-b border-[#f0f4f3] dark:border-[#2a3c36] sticky top-0 z-20">
<div class="flex items-center gap-3 text-text-main dark:text-white">
<div class="size-6 text-primary">
<svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z" fill="currentColor"></path>
</svg>
</div>
<span class="font-bold text-lg text-primary">MindSettler</span>
</div>
<button class="text-text-main dark:text-white">
<span class="material-symbols-outlined">menu</span>
</button>
</header>
<header class="hidden md:flex items-center justify-between px-8 py-4 bg-background-light dark:bg-background-dark/50 backdrop-blur-sm sticky top-0 z-10 border-b border-transparent">
<div>
</div>
<div class="flex items-center gap-4">
<button class="flex items-center justify-center size-10 rounded-xl bg-white dark:bg-[#2a3c36] text-text-main dark:text-white shadow-sm hover:bg-gray-50 dark:hover:bg-[#344a43] transition-colors relative border border-gray-100 dark:border-transparent">
<span class="material-symbols-outlined">notifications</span>
<span class="absolute top-2.5 right-2.5 size-2 bg-vibrant-pink rounded-full border-2 border-white dark:border-[#2a3c36]"></span>
</button>
<button class="flex items-center justify-center size-10 rounded-xl bg-white dark:bg-[#2a3c36] text-text-main dark:text-white shadow-sm hover:bg-gray-50 dark:hover:bg-[#344a43] transition-colors border border-gray-100 dark:border-transparent">
<span class="material-symbols-outlined">help</span>
</button>
</div>
</header>
<!-- Django Messages -->
{% if messages %}
<div class="px-4 md:px-8 pt-4">
{% for message in messages %}
<div class="p-4 mb-4 rounded-lg {% if message.tags == 'success' %}bg-green-50 text-green-800 border border-green-200{% elif message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}">
{{ message }}
</div>
{% endfor %}
</div>
{% endif %}
<div class="px-4 md:px-8 py-6 w-full max-w-6xl mx-auto space-y-6 md:space-y-8 pb-20">
<section class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 md:p-8 shadow-sm border border-gray-100 dark:border-[#2a3c36] relative overflow-hidden">
<div class="absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"></div>
<div class="flex flex-col md:flex-row items-center md:items-start gap-6 relative z-10">
<div class="relative group cursor-pointer">
{% if user.profile.avatar_type == 'masculine' %}
<div class="bg-center bg-no-repeat bg-cover rounded-full size-24 md:size-32 ring-4 ring-white dark:ring-[#2a3c36]" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBhHHgZ9dtY04LKWmnaFO_zuWr-nvhOMkikf7glv9jjhjW34soAWJtg1Ezfji2QW-FTm4AssdDfallCJypnVz8bXPQIH9OFspTYa8RwFk-uGjam30zoXpuISf6C0KlB7LwxXk9a_OkxXxfltEsPcdaLg1jMsrDIYr2-9i-_nKlH02uemfvbI_hxSiPoYs5GAJE2QTrVjYIidr0ivD9W7CizNyKkDVaIIkPdxJOUWNojrTdoHji4oDks3b_F0DR4_zQc3fARGU6WoI_A");'></div>
{% elif user.profile.avatar_type == 'feminine' %}
<div class="bg-center bg-no-repeat bg-cover rounded-full size-24 md:size-32 ring-4 ring-white dark:ring-[#2a3c36]" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCo-_6pH73xFibPz6-R56q1Q-EzEJJDyvWY_rOrv9edZUdoDgTa3ClGay7MOFTlc0N2l4fONWmrWVmUQ-SWItxN8_lFhjEhcsdTQ1uJIT29UxvB2-qlE2BI_YtqQCa5AlTqb5AP7M5ffRcVhqw83BfEnNBLJz2qW21Bne4M59WV-YuaGfbBE1qYr7KoVunP8CcZkd3WI0WelY-QEFIIqFHzyAnGtZOOOXDFOXW_5Xd--64iSMuT1XvFEIHjzXM0fL3m6jp41AFVpE_a");'></div>
{% elif user.profile.avatar_type == 'neutral' %}
<div class="bg-center bg-no-repeat bg-cover rounded-full size-24 md:size-32 ring-4 ring-white dark:ring-[#2a3c36]" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAixXpUehE17jx6XSugCs3bmjgPik7TWVeiLEp-KyVO1LX3bqhp-fYxSlCZoFXtueeg9YTe7aMybEAF8UDg-rs9nQotScmHo0wod4CQljl1V-rvR8a8sjk2DnDLy0oMqpaOdgMd9mDdeLYBPKTY6921mP8OCv7W5Djbq_31PstKhrUOf5GK0Edy8uzWPfzMoTFdHg8wsU5U7YiGE0rKL-kaydxWWJY-1Tn0wIyBL4r0-t2r2HRR9YJeJsMFN-jjF7wFjThqFmSF8vlt");'></div>
{% else %}
<div class="bg-soft-pink rounded-full size-24 md:size-32 ring-4 ring-white dark:ring-[#2a3c36] flex items-center justify-center">
<span class="text-5xl md:text-6xl font-bold text-primary">{{ user.first_name.0|default:user.username.0|upper }}</span>
</div>
{% endif %}
<a href="{% url 'users:profileimage' %}" aria-label="Change Avatar" class="absolute bottom-0 right-0 p-2 bg-vibrant-pink text-white rounded-full shadow-lg hover:bg-vibrant-pink/90 transition-colors">
<span class="material-symbols-outlined text-[18px] md:text-[20px]">photo_camera</span>
</a>
</div>
<div class="flex flex-col items-center md:items-start text-center md:text-left pt-2">
<h1 class="text-2xl md:text-3xl font-bold text-text-main dark:text-white leading-tight">Welcome back, {{ user.first_name|default:user.username }}</h1>
<p class="text-text-muted dark:text-gray-400 mt-1">Ready to continue your journey today?</p>
<div class="flex items-center gap-2 mt-3">
<span class="px-3 py-1 bg-pale-lavender dark:bg-primary/20 text-primary dark:text-primary-light text-xs font-bold rounded-full uppercase tracking-wider">Mindful Member</span>
</div>
</div>
<div class="md:ml-auto flex gap-3 mt-4 md:mt-0">
<a href="{% url 'appointment:booking' %}" class="px-4 py-2 bg-primary text-white font-bold text-sm rounded-lg shadow-md hover:bg-primary/90 transition-colors">Start Session</a>
</div>
</div>
</section>
<section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
<div class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-gray-100 dark:border-[#2a3c36] shadow-sm flex flex-col justify-between h-32 hover:border-vibrant-pink/30 transition-colors group">
<div class="flex items-center gap-2 text-text-muted dark:text-gray-400">
<span class="material-symbols-outlined text-vibrant-pink group-hover:scale-110 transition-transform">self_improvement</span>
<p class="text-sm font-medium">Days Mindful</p>
</div>
<p class="text-3xl font-bold text-text-main dark:text-white">{{ days_mindful|default:0 }}</p>
</div>
<div class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-gray-100 dark:border-[#2a3c36] shadow-sm flex flex-col justify-between h-32 hover:border-vibrant-pink/30 transition-colors group">
<div class="flex items-center gap-2 text-text-muted dark:text-gray-400">
<span class="material-symbols-outlined text-vibrant-pink group-hover:scale-110 transition-transform">school</span>
<p class="text-sm font-medium">Modules Completed</p>
</div>
<p class="text-3xl font-bold text-text-main dark:text-white">{{ modules_completed|default:0 }}</p>
</div>
<div class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-gray-100 dark:border-[#2a3c36] shadow-sm flex flex-col justify-between h-32 hover:border-vibrant-pink/30 transition-colors group">
<div class="flex items-center gap-2 text-text-muted dark:text-gray-400">
<span class="material-symbols-outlined text-vibrant-pink group-hover:scale-110 transition-transform">local_fire_department</span>
<p class="text-sm font-medium">Current Streak</p>
</div>
<p class="text-3xl font-bold text-text-main dark:text-white">{{ current_streak|default:0 }} <span class="text-base font-normal text-text-muted dark:text-gray-500">days</span></p>
</div>
</section>
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
<div class="lg:col-span-2 space-y-6">
<form method="post" action="{% url 'users:update_profile' %}" class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-gray-100 dark:border-[#2a3c36] overflow-hidden">
{% csrf_token %}
<div class="px-6 py-4 border-b border-gray-100 dark:border-[#2a3c36] flex justify-between items-center">
<h3 class="text-lg font-bold text-text-main dark:text-white">Personal Information</h3>
<button type="button" onclick="toggleEdit()" class="text-sm font-medium text-primary hover:text-primary-dark transition-colors">Edit</button>
</div>
<div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="space-y-2">
<label class="text-sm font-medium text-primary dark:text-gray-400" for="first_name">First Name</label>
<input class="w-full px-4 py-3 rounded-lg bg-pale-lavender dark:bg-[#11211c] border-transparent focus:border-primary focus:bg-white dark:focus:bg-[#1a2c26] focus:ring-0 text-text-main dark:text-white text-sm transition-all edit-field" id="first_name" name="first_name" readonly="" type="text" value="{{ user.first_name }}"/>
</div>
<div class="space-y-2">
<label class="text-sm font-medium text-primary dark:text-gray-400" for="last_name">Last Name</label>
<input class="w-full px-4 py-3 rounded-lg bg-pale-lavender dark:bg-[#11211c] border-transparent focus:border-primary focus:bg-white dark:focus:bg-[#1a2c26] focus:ring-0 text-text-main dark:text-white text-sm transition-all edit-field" id="last_name" name="last_name" readonly="" type="text" value="{{ user.last_name }}"/>
</div>
<div class="space-y-2">
<label class="text-sm font-medium text-primary dark:text-gray-400" for="email">Email Address</label>
<input class="w-full px-4 py-3 rounded-lg bg-pale-lavender dark:bg-[#11211c] border-transparent focus:border-primary focus:bg-white dark:focus:bg-[#1a2c26] focus:ring-0 text-text-main dark:text-white text-sm transition-all edit-field" id="email" name="email" readonly="" type="email" value="{{ user.email }}"/>
</div>
<div class="space-y-2">
<label class="text-sm font-medium text-primary dark:text-gray-400" for="phone">Phone Number</label>
<input class="w-full px-4 py-3 rounded-lg bg-pale-lavender dark:bg-[#11211c] border-transparent focus:border-primary focus:bg-white dark:focus:bg-[#1a2c26] focus:ring-0 text-text-main dark:text-white text-sm transition-all edit-field" id="phone" name="phone" readonly="" type="text" value="{{ user.profile.phone|default:'' }}"/>
</div>
</div>
<div class="px-6 py-4 bg-gray-50 dark:bg-[#15231f] flex justify-end">
<button type="submit" class="px-5 py-2 bg-primary text-white font-bold text-sm rounded-lg shadow-sm hover:bg-primary/90 transition-colors save-btn" style="display:none;">Save Changes</button>
</div>
</form>
<script>
function toggleEdit() {
    const fields = document.querySelectorAll('.edit-field');
    const saveBtn = document.querySelector('.save-btn');
    const isReadonly = fields[0].hasAttribute('readonly');
    
    fields.forEach(field => {
        if (isReadonly) {
            field.removeAttribute('readonly');
            field.classList.remove('bg-pale-lavender');
            field.classList.add('bg-white');
        } else {
            field.setAttribute('readonly', '');
            field.classList.add('bg-pale-lavender');
            field.classList.remove('bg-white');
        }
    });
    
    saveBtn.style.display = isReadonly ? 'block' : 'none';
}
</script>
<div class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-gray-100 dark:border-[#2a3c36] p-6">
<div class="flex justify-between items-end mb-6">
<div>
<h3 class="text-lg font-bold text-text-main dark:text-white">Mood History</h3>
<p class="text-sm text-text-muted dark:text-gray-400">Your emotional journey over the last {{ days_param }} days</p>
</div>
<form method="get" action="{% url 'users:profile' %}" id="moodDaysForm">
<select name="days" onchange="this.form.submit()" class="bg-gray-50 dark:bg-[#11211c] border-none text-xs rounded-lg px-3 py-1.5 text-text-main dark:text-white focus:ring-1 focus:ring-primary cursor-pointer">
<option value="7" {% if days_param == 7 %}selected{% endif %}>Last 7 Days</option>
<option value="30" {% if days_param == 30 %}selected{% endif %}>Last 30 Days</option>
</select>
</form>
</div>
<div class="relative w-full h-48">
<canvas id="moodChart"></canvas>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('moodChart').getContext('2d');
const moodChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: {{ mood_labels|safe }},
        datasets: [{
            label: 'Mood Score',
            data: {{ mood_data|safe }},
            borderColor: '#DD1764',
            backgroundColor: 'rgba(221, 23, 100, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: '#ffffff',
            pointBorderColor: '#DD1764',
            pointBorderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 6
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(63, 41, 101, 0.9)',
                titleColor: '#fff',
                bodyColor: '#fff',
                padding: 12,
                displayColors: false,
                callbacks: {
                    label: function(context) {
                        return 'Mood: ' + context.parsed.y + '/10';
                    }
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                max: 10,
                ticks: {
                    stepSize: 2,
                    color: '#9ca3af'
                },
                grid: {
                    color: 'rgba(156, 163, 175, 0.1)'
                }
            },
            x: {
                ticks: { color: '#9ca3af' },
                grid: { display: false }
            }
        }
    }
});
</script>
</div>
<div class="space-y-6">
<div class="bg-soft-pink dark:bg-surface-dark rounded-xl shadow-sm border border-gray-100 dark:border-[#2a3c36] p-6">
<h3 class="text-lg font-bold text-text-main dark:text-white mb-4">Recent Journey</h3>
<div class="relative pl-4 border-l-2 border-white/50 dark:border-[#2a3c36] space-y-6">
{% if activities %}
{% for activity in activities %}
<div class="relative pl-4">
<div class="absolute -left-[21px] top-1 size-3 bg-vibrant-pink rounded-full border-2 border-white dark:border-[#1a2c26]"></div>
<p class="text-xs font-semibold text-text-muted dark:text-gray-400 mb-0.5">
{% if activity.timestamp.date == today %}
Today, {{ activity.timestamp|time:"g:i A" }}
{% elif activity.timestamp.date == yesterday %}
Yesterday, {{ activity.timestamp|time:"g:i A" }}
{% else %}
{{ activity.timestamp|date:"M d, Y" }}
{% endif %}
</p>
<h4 class="text-sm font-bold text-text-main dark:text-white">{{ activity.action }}</h4>
<p class="text-xs text-text-muted dark:text-gray-500 mt-1">Activity logged</p>
</div>
{% endfor %}
{% else %}
<div class="relative pl-4">
<div class="absolute -left-[21px] top-1 size-3 bg-gray-300 rounded-full border-2 border-white dark:border-[#1a2c26]"></div>
<p class="text-sm text-text-muted dark:text-gray-400">No activities yet. Start your journey today!</p>
</div>
{% endif %}
</div>
<a href="{% url 'users:sessionhistory' %}" class="w-full mt-6 py-2 text-sm font-medium text-primary hover:bg-white/30 rounded-lg transition-colors block text-center">View Full History</a>
</div>
<div class="bg-pale-lavender dark:bg-surface-dark rounded-xl shadow-sm border border-gray-100 dark:border-[#2a3c36] p-6">
<h3 class="text-lg font-bold text-text-main dark:text-white mb-4">Preferences</h3>
<div class="space-y-4">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-text-main dark:text-white">Email Notifications</p>
<p class="text-xs text-text-muted dark:text-gray-500">Weekly progress reports</p>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input {% if user.profile.email_notifications %}checked{% endif %} class="sr-only peer preference-toggle" data-pref="email_notifications" type="checkbox"/>
<div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-vibrant-pink"></div>
</label>
</div>
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-text-main dark:text-white">Daily Reminder</p>
<p class="text-xs text-text-muted dark:text-gray-500">Push notifications at 9 AM</p>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input {% if user.profile.daily_reminder %}checked{% endif %} class="sr-only peer preference-toggle" data-pref="daily_reminder" type="checkbox"/>
<div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-vibrant-pink"></div>
</label>
</div>
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-text-main dark:text-white">Public Profile</p>
<p class="text-xs text-text-muted dark:text-gray-500">Allow friends to find you</p>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input {% if user.profile.public_profile %}checked{% endif %} class="sr-only peer preference-toggle" data-pref="public_profile" type="checkbox"/>
<div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-vibrant-pink"></div>
</label>
</div>
</div>
<script>
// Handle preference toggles
document.querySelectorAll('.preference-toggle').forEach(toggle => {
    toggle.addEventListener('change', function() {
        const prefName = this.dataset.pref;
        const isChecked = this.checked;
        
        fetch('{% url "users:update_preferences" %}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: `${prefName}=${isChecked}`
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                console.log(`${prefName} updated to ${isChecked}`);
            }
        })
        .catch(error => console.error('Error:', error));
    });
});
</script>
</div>
</div>
</div>
</div>
<footer class="mt-8 text-center border-t border-gray-100 dark:border-[#2a3c36] pt-6 pb-2">
<p class="text-xs text-text-muted dark:text-gray-500">
                    Â© 2024 MindSettler. Prioritizing your mental wellness.
                </p>
</footer>
</main>
</div>

</body></html>